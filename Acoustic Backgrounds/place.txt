window.onload=function(){
    chrome.storage.sync.get(["bey"], function(result){
        console.log(result.bey)
        document.getElementById("testss").innerHTML = result.bey;
        // chrome.notifications.create
    });

    const button = document.getElementById("valuer");
    console.log(button)
    if(button){
        button.addEventListener("click", getInput);
    }
function getInput() {
    console.log("PROCESSING")
    var input = document.getElementById("input").value;
    
    chrome.storage.sync.set({bey: input}, function() {
        console.log("Value is set to " + input);
    });
    
    chrome.storage.sync.get(["bey"], function(result){
        console.log(result.bey)
        document.getElementById("testss").innerHTML = result.bey;
    });
}

chrome.storage.sync.get(["key"], function(results){
    console.log(results.key)
    document.getElementById("testss").innerHTML = results.key;
});


    <input type="text" placeholder="putsomethinghere" id="input">
    <button type="submit" id="valuer">Get Value</button>
    <button type="submit" id="test">Set Value</button>
    <h1 id="testss">h</h1>



const form = document.querySelector('#new-task-form');
    const input = document.querySelector('#new-task-input');
    const list_el = document.querySelector('#tasks');
    form.addEventListener("submit", (e) => {
        e.preventDefault();
        const task = input.value;

        if(!task) {
            alert("No note was added");
            return;
        }

        const task_el = document.createElement('div');
        task_el.classList.add('task');

        const task_content_el = document.createElement('div');
        task_content_el.classList.add('content');
        task_el.appendChild(task_content_el);

        const task_input_el = document.createElement('input');
        task_input_el.classList.add('texts');
        task_input_el.type = 'texts';
        task_input_el.value = task;
        task_input_el.setAttribute("readonly", "readonly");

        task_content_el.appendChild(task_input_el);

        const task_actions_el = document.createElement('div');
        task_actions_el.classList.add('actions');

        const task_edit_el = document.createElement('button');
        task_edit_el.classList.add('edit');
        task_edit_el.innerHTML = 'Edit';

        const task_delete_el = document.createElement('button');
        task_delete_el.classList.add('delete');
        task_delete_el.innerHTML = 'Delete';

        task_actions_el.appendChild(task_edit_el);
        task_actions_el.appendChild(task_delete_el);

        task_el.appendChild(task_actions_el);

        list_el.appendChild(task_el);
        console.log("THis is the task:"+task_el + task_actions_el, task_input_el, task_content_el,input.value);

        input.value = '';

        task_edit_el.addEventListener('click', () => {
            if (task_edit_el.innerText.toLowerCase() == "edit") {
                task_input_el.removeAttribute('readonly');
                task_input_el.focus();
                task_edit_el.innerText = "Save";
            } else {
                task_input_el.setAttribute('readonly', 'readonly');
                task_edit_el.innerText = "Edit";
            }
        });

        task_delete_el.addEventListener('click', () => {
            list_el.removeChild(task_el);
            console.log("DELTED BIUCHRTHCHHhh")
        });

        chrome.storage.sync.get(function(cfg) {
            if(typeof(cfg["Note"]) !== 'undefined' && cfg["Note"] instanceof Array) { 
              cfg["Note"].push(task);
            } else {
              cfg["Note"] = [task];
            }
            chrome.storage.sync.set(cfg);
          });
    });
    chrome.storage.sync.get(["Note"], function(notey){
        console.log("THIS IS THE NEW TAB ARAYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY" + notey.Note);
        theNotes = notey.Note;
        theNotes.forEach(text => {
            const task = text
            const task_el = document.createElement('div');
            task_el.classList.add('task');
    
            const task_content_el = document.createElement('div');
            task_content_el.classList.add('content');
            task_el.appendChild(task_content_el);
    
            const task_input_el = document.createElement('input');
            task_input_el.classList.add('texts');
            task_input_el.type = 'texts';
            task_input_el.value = task;
            task_input_el.setAttribute("readonly", "readonly");
    
            task_content_el.appendChild(task_input_el);
    
            const task_actions_el = document.createElement('div');
            task_actions_el.classList.add('actions');
    
            const task_edit_el = document.createElement('button');
            task_edit_el.classList.add('edit');
            task_edit_el.innerHTML = 'Edit';
    
            const task_delete_el = document.createElement('button');
            task_delete_el.classList.add('delete');
            task_delete_el.innerHTML = 'Delete';
    
            task_actions_el.appendChild(task_edit_el);
            task_actions_el.appendChild(task_delete_el);
    
            task_el.appendChild(task_actions_el);
    
            list_el.appendChild(task_el);

            task_edit_el.addEventListener('click', () => {
                if (task_edit_el.innerText.toLowerCase() == "edit") {
                    task_input_el.removeAttribute('readonly');
                    task_input_el.focus();
                    task_edit_el.innerText = "Save";
                } else {
                    task_input_el.setAttribute('readonly', 'readonly');
                    task_edit_el.innerText = "Edit";
                }
            });
    
            task_delete_el.addEventListener('click', () => {
                chrome.storage.sync.get(["Note"], function(removing){
                    // let work = emoving.Note.splice(removing.Note.indexOf(task), 1);
                    // console.log(work)
                    // chrome.storage.sync.set(removing);
                    console.log("REMOVING STUFF" + removing.Note)
                    var myArray = removing.Note;
                    var myIndex = myArray.indexOf(task);
                    console.log("This is the index of the note: " + myIndex);
                    if (myIndex > -1) {
                        myArray.splice(myIndex, 1);
                    }

                    console.log("This is the new array: " + myArray);

                    chrome.storage.sync.remove("Note", function(){
                        console.log("removed the array")
                    });
                    chrome.storage.sync.get(["lmfao"], function(bro){
                        console.log("--------------------------------------------------------------------------")
                        if (bro.lmfao == undefined) {
                            chrome.storage.sync.set({"lmfao": "OMG"});
                            console.log("BRO THIS IS THE LMFAO THINGY: " + bro.lmfao);
                        } else {
                            console.log("hopefully worky")
                            console.log(bro)
                            console.log("XDCDDDDDDDDDDDDDDDDD: " + bro.lmfao);
                            bro.push("HIIIIIIIIIIIIIIII")
                            console.log("XDCDDDDDDDDDDDDDDDDD: " + bro.lmfao);
                            console.log(bro)
                        }
                    })
                    myArray.forEach(texty => {
                        chrome.storage.sync.get(function(boo) {
                            console.log("ran the function " + texty)
                            console.log("This is the boo note shitz " + boo["Note"])
                            console.log("THIS IS THE TYPe OF BOO " + typeof(boo["Note"]))
                            if(typeof(boo["Note"]) == 'undefined') { 
                                boo["Note"] = texty;
                                console.log("WE SET IT BOIIISSS LETS FRINKEN GOOOOOOOOO")
                                console.log("AFTER THE SET " + boo["Note"])
                            } else {
                                console.log("WEEEE ADDED IT BOISSS LETS FRINKENGFDNGDFGJKLDFJGLFDG")
                                 ["Note"].push(texty);
                            }
                            chrome.storage.sync.set(boo);
                          });
                    });
                    // && boo["Note"] instanceof Array

                })
                console.log(task_el)
                console.log("This is the task: " + task)
                console.log("This is acutal: " + text)
                chrome.storage.sync.remove(task, function(removed){
                    console.log("We have successfully removed: " + removed)
                    console.log("We have removed it and this has worked omg lololoooo")
                })
                list_el.removeChild(task_el);
                console.log(list_el)
                console.log("DELTED BIUCHRTHCHHhh")
            });
        })
    });
